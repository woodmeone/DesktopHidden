<?xml version="1.0" encoding="utf-8"?>
<UserControl
  x:Class="DesktopHidden.Views.SubZoneView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="using:DesktopHidden.Views"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:converters="using:DesktopHidden.Converters"
  mc:Ignorable="d"
  d:DesignHeight="150"
  d:DesignWidth="200">

  <UserControl.Resources>
    <converters:BooleanToLockIconConverter x:Key="BooleanToLockIconConverter" />
    <converters:BooleanToGridLengthConverter x:Key="BooleanToGridLengthConverter" />
    <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    <Style x:Key="SubZoneNavBarButton" TargetType="Button">
      <Setter Property="Background" Value="Transparent" />
      <Setter Property="Foreground" Value="White" />
      <Setter Property="Width" Value="30" />
      <Setter Property="Height" Value="30" />
      <Setter Property="BorderThickness" Value="0" />
      <Setter Property="Margin" Value="2,0" />
      <Setter Property="FontFamily" Value="Segoe Fluent Icons" />
      <Setter Property="FontSize" Value="12" />
    </Style>
  </UserControl.Resources>

  <Border x:Name="SubZoneBorder" CornerRadius="5" Background="{Binding BackgroundColor}"
    Opacity="{Binding Opacity}">
    <!-- Fallback Background for design time or if binding fails -->
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="30" />
        <RowDefinition
          Height="{Binding IsContentVisible, Converter={StaticResource BooleanToGridLengthConverter}}" />
      </Grid.RowDefinitions>

      <!-- 顶部导航栏 -->
      <Grid x:Name="NavBar" Grid.Row="0" Background="#99000000" HorizontalAlignment="Stretch"
        VerticalAlignment="Top"
        PointerPressed="NavBar_PointerPressed">
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
          <!-- 锁定按钮 -->
          <Button Style="{StaticResource SubZoneNavBarButton}" Click="LockButton_Click">
            <FontIcon FontFamily="Segoe Fluent Icons"
              Glyph="{Binding IsLocked, Converter={StaticResource BooleanToLockIconConverter}}"
              Foreground="White" /> <!-- 明确设置前景颜色 -->
          </Button>

          <!-- 删除按钮 -->
          <Button Style="{StaticResource SubZoneNavBarButton}" Click="DeleteButton_Click">
            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE74D;" Foreground="White" /> <!--
            明确设置前景颜色 -->
          </Button>

          <!-- 下拉框按钮 (隐藏/显示内容) -->
          <Button Style="{StaticResource SubZoneNavBarButton}" Click="ToggleContentButton_Click">
            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE70D;" Foreground="White" /> <!--
            明确设置前景颜色 -->
          </Button>

          <!-- 伪装按钮 -->
          <Button Style="{StaticResource SubZoneNavBarButton}" Click="DisguiseButton_Click">
            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE7B3;" Foreground="White" /> <!--
            明确设置前景颜色 -->
          </Button>
        </StackPanel>
      </Grid>

      <!-- 内容区域 -->
      <Grid x:Name="ContentArea" Grid.Row="1" Background="Transparent"
        Visibility="{Binding IsContentVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
        <TextBlock Text="{Binding Id}" HorizontalAlignment="Center" VerticalAlignment="Center"
          Foreground="White" FontSize="20" />
      </Grid>
    </Grid>
  </Border>
</UserControl>